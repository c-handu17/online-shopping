{
   "swagger":"2.0",
   "host":"127.0.0.1:8000",
   "basePath":"/api/",
   "info":{
      "version":"1.0.0",
      "title":"Simple API",
      "description":"A simple API to learn how to write OpenAPI Specification"
   },
   "schemes":[
      "https",
      "http"
   ],
   "consumes":[
      "application/json"
   ],
   "produces":[
      "application/json"
   ],
   "securityDefinitions":{
      "oauth":{
         "tokenUrl":"http://auth.ibtspl.com/oauth2/",
         "flow":"password",
         "scopes":{
            "read":"read users",
            "write":"create users",
            "update":"update users",
            "delete":"delete users",
            "superuser":"super user permission"
         },
         "type":"oauth2"
      }
   },
   "definitions":{
      "ProductObject":{
         "type":"object",
         "properties":{
            "id":{
               "type":"integer",
               "format":"int64"
            },
            "name":{
               "type":"string"
            },
            "description":{
               "type":"string"
            },
            "price":{
               "type":"number",
               "format":"float"
            }
         }
      },
      "CommonHttpExceptionResponse":{
         "type":"object",
         "properties":{
            "response":{
               "type":"string"
            },
            "http_status_code":{
               "type":"integer"
            }
         },
         "required":[
            "response",
            "http_status_code"
         ]
      }
   },
   "parameters":{
      "category":{
         "name":"category",
         "in":"query",
         "description":"Category",
         "type":"string",
         "enum":[
            "ELECTRONICS",
            "CLOTHING",
            "KITCHEN APPLIANCES",
            "BEAUTY PRODUCTS",
            "BOOKS"
         ]
      },
      "brand":{
         "name":"brand",
         "in":"query",
         "description":"Brand",
         "type":"string",
         "enum":[
            "PHILIPS",
            "PUMA",
            "ELICA",
            "SUGAR",
            "AMAZON BOOKS"
         ]
      },
      "sort_by":{
         "name":"sort_by",
         "in":"query",
         "description":"Sort by",
         "type":"string",
         "enum":[
            "PRICE"
         ]
      },
      "sort_value":{
         "name":"sort_value",
         "in":"query",
         "description":"Sort value",
         "type":"string",
         "enum":[
            "ASC",
            "DESC"
         ]
      },
      "PostCartItems":{
         "name":"requestBody",
         "in":"body",
         "description":"The request body for adding items in cart",
         "required":true,
         "schema":{
            "type":"object",
            "properties":{
               "product_id":{
                  "type":"integer"
               }
            }
         }
      }
   },
   "responses":{
      "NoFilterViewBadResponse":{
         "description":"No products with filtered view",
         "schema":{
            "allOf":[
               {
                  "$ref":"#/definitions/CommonHttpExceptionResponse"
               },
               {
                  "type":"object",
                  "properties":{
                     "res_status":{
                        "type":"string",
                        "enum":[
                           "INVALID_FILTERED_VIEW",
                           "USER_NOT_EXISTS"
                        ]
                     }
                  }
               }
            ]
         }
      },
      "NoItemsInCartBadResponse":{
         "description":"No items in cart",
         "schema":{
            "allOf":[
               {
                  "$ref":"#/definitions/CommonHttpExceptionResponse"
               },
               {
                  "type":"object",
                  "properties":{
                     "res_status":{
                        "type":"string",
                        "enum":[
                           "PRODUCT_NOT_EXISTS"
                        ]
                     }
                  }
               }
            ]
         }
      },
      "UserNotExists":{
         "description":"User doesn't exist",
         "schema":{
            "allOf":[
               {
                  "$ref":"#/definitions/CommonHttpExceptionResponse"
               },
               {
                  "type":"object",
                  "properties":{
                     "res_status":{
                        "type":"string",
                        "enum":[
                           "USER_NOT_EXISTS"
                        ]
                     }
                  }
               }
            ]
         }
      },
      "NoItemsInCart":{
         "description":"No items in Cart",
         "schema":{
            "allOf":[
               {
                  "$ref":"#/definitions/CommonHttpExceptionResponse"
               },
               {
                  "type":"object",
                  "properties":{
                     "res_status":{
                        "type":"string",
                        "enum":[
                           "NO_ITEMS_IN_CART"
                        ]
                     }
                  }
               }
            ]
         }
      }
   },
   "paths":{
      "/products/":{
         "get":{
            "operationId":"getProducts",
            "summary":"Get all products",
            "description":"Get products",
            "security":[
               {
                  "oauth":[
                     "read"
                  ]
               }
            ],
            "parameters":[
               {
                  "$ref":"#/parameters/category"
               },
               {
                  "$ref":"#/parameters/brand"
               },
               {
                  "$ref":"#/parameters/sort_by"
               },
               {
                  "$ref":"#/parameters/sort_value"
               }
            ],
            "responses":{
               "200":{
                  "description":"Successfully filtered products",
                  "schema":{
                     "type":"object",
                     "properties":{
                        "products":{
                           "type":"array",
                           "items":{
                              "$ref":"#/definitions/ProductObject"
                           }
                        },
                        "total_count":{
                           "type":"integer"
                        }
                     }
                  }
               }
            }
         }
      },
      "/cart/":{
         "get":{
            "operationId":"getCart",
            "summary":"Get cart",
            "description":"Get cart",
            "security":[
               {
                  "oauth":[
                     "read"
                  ]
               }
            ],
            "responses":{
               "200":{
                  "description":"Successfully filtered products",
                  "schema":{
                     "type":"object",
                     "properties":{
                        "products":{
                           "type":"array",
                           "items":{
                              "$ref":"#/definitions/ProductObject"
                           }
                        },
                        "total_count":{
                           "type":"integer"
                        }
                     }
                  }
               }
            }
         }
      },
      "/cart/item/":{
         "post":{
            "operationId":"addToCart",
            "summary":"Add to cart",
            "description":"Add an item to the cart",
            "security":[
               {
                  "oauth":[
                     "write",
                     "read"
                  ]
               }
            ],
            "parameters":[
               {
                  "$ref":"#/parameters/PostCartItems"
               }
            ],
            "responses":{
               "200":{
                  "description":"Successfully filtered products",
                  "schema":{
                     "type":"object",
                     "properties":{
                        "cart_id":{
                           "type":"integer"
                        }
                     }
                  }
               },
               "404":{
                  "$ref":"#/responses/NoItemsInCartBadResponse"
               }
            }
         }
      },
      "/cart/items/remove/":{
         "delete":{
            "operationId":"deleteCartItems",
            "summary":"Remove items from cart",
            "description":"Remove items from the cart",
            "security":[
               {
                  "oauth":[
                     "read"
                  ]
               }
            ],
            "responses":{
               "200":{
                  "description":"Successfully Cart items",
                  "schema":{
                     "type":"object",
                     "properties":{
                        "message":{
                          "type":"string"
                        }
                     }
                  }
               }
            }
         }
      }
   }
}